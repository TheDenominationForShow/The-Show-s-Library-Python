# showlib的python版本

## 借鉴

主要思考git和mqtt的模式

## 想法

尽可能地减少资源的占用，减少不必要的传输和规范

## 设计

### 客户端设计

#### SL_Storage

建立仓库配置文件，生成当前仓库的guid，

对资源进行定位，并存入数据库

* create_storage        创建仓库
* open_storage          打开仓库
* delete_stroage        删除仓库

* add_path              添加管理路径
* del_path              删除管理路径
* scan_path             扫描并记录

#### SL_Signature
    
    对资源进行签名，并插入到数据库，暂定sqlite

* GetFileHash   签名
* GenRecord     生成记录
* InsertToDB    记录存库

#### SL_History

#### SL_Manage_Signature

从签名库中读取，插入，发布，订阅

* GetRecords
* InertRecord
* InertRecords
* 

#### SL_Manage_Resource
从资源库中读取，定位，发布，订阅
#### SL_Manage_Storage

#### SL_Client

* Publish_Signature
* Publish_Storage
* SubcribeBySignature
* SubcribeByStorage

### 服务端设计

#### SL_Server

### 数据库设计

## 记录

* 2019-11-20,需要增加扫描文件的过滤器，不然会把db文件也给扫描
* 2019-11-23,现在的处理是，扫描root，得到某个文件名，hash，生成记录，存库。这样没有把cpu用起来。后续应该是，集中扫描文件名，多线程hash，生成记录，存库